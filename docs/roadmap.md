# План разработки HeadUnit OS (Roadmap)

Данный документ описывает этапы реализации проекта на основе утвержденного PRD. План разделен на логические фазы, начиная от базовой инфраструктуры и заканчивая интеграцией в глобальную экосистему.

## Фаза 1: Инфраструктура и Фундамент ОС [ЗАВЕРШЕНО]

- [x] **Архитектура слоев:** Разделение системы на Image, OS, Services и App слои.
- [x] **Boot Linker:** Механизм динамического переключения версий ПО при загрузке.
- [x] **Надежность ФС:** Настройка OverlayFS (ReadOnly корень + RAM overlay) для защиты SD-карты.
- [x] **Image Builder:** Скрипты автоматизированной сборки образа (PowerShell + Docker).
- [x] **Идентификация:** Система генерации SN, Hostname и настройки сети (Wi-Fi AP/Client).

## Фаза 2: Общие сервисы и Связность [В ПРОЦЕССЕ]

- [ ] **Протокол обмена (cd-protocol):** Финализация спецификации и реализация библиотек для Python.
- [ ] **Локальная БД:** Настройка структуры SQLite/PostgreSQL для хранения профилей и истории экстракций.
- [ ] **MQTT Message Bus:** Стандартизация топиков и реализация брокера/клиента для взаимодействия компонентов.
- [ ] **ESP-NOW Gateway:** Реализация сервиса для прозрачного обмена данными с ESP32-периферией.

## Фаза 3: Прикладная логика (Backend)

- [ ] **Extraction Engine:** Ядро управления процессом пролива (логика работы с 5 параметрами).
- [ ] **Profile Manager:** API для создания, редактирования и хранения сложных профилей экстракции.
- [ ] **Data Collector:** Сервис высокочастотного сбора данных с датчиков и их агрегации.
- [ ] **Calibration Service:** Инструментарий для калибровки датчиков и исполнительных механизмов.

## Фаза 4: Пользовательский интерфейс (Frontend & Kiosk) [В ПРОЦЕССЕ]

- [x] **Kiosk Mode:** Интеграция `headunit-kiosk.service`, запуск графической подсистемы (Wayland/Cage).
- [/] **Design System:** Основа UI-кита и фронтенд-приложения (React) уже заложена в `src/frontend`. Оптимизация под 2880x824 продолжается.
- [ ] **Real-time Graphs:** Визуализация потока, давления и температуры "на лету" в процессе варки.
- [ ] **Splash Screen:** Кастомный экран загрузки для скрытия системных логов.
- [ ] **SCA Forms Interface:** Удобный ввод органолептических оценок после завершения экстракции.

## Фаза 5: "Кофейная Лаборатория" и Обучение

- [ ] **Analytics Engine:** Модуль сравнения планового и фактического графиков экстракции.
- [ ] **Training Wizard:** Система интерактивных подсказок и комментариев для бариста.
- [ ] **Knowledge Base:** Локальное хранилище рецептов и инструкций от шеф-бариста.
- [ ] **Haptic Feedback Integration:** Программирование обратной связи на ручках управления при ошибках.

## Фаза 6: Экосистема и SaaS

- [ ] **OTA Agent:** Полноценный механизм обновления слоев через облако с валидацией подписей.
- [ ] **SaaS Sync:** Синхронизация локальных данных с облачной платформой Reborn.
- [ ] **Cloud Profiles:** Возможность загрузки "эталонных" профилей от обжарщиков.
- [ ] **Remote Monitoring:** Передача логов и состояния оборудования для удаленной техподдержки.

## Ключевые вехи (Milestones)

1. **M1 (V0.5.0):** Стабильный пролив по заданному профилю с записью лога в локальную БД.
2. **M2 (V0.8.0):** Полноценный UI на основном экране с отображением графиков и поддержкой Kiosk Mode.
3. **M3 (V1.0.0):** Интеграция с SaaS, поддержка OTA и режимов обучения.
